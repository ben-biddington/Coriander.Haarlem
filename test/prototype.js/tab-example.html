<html>
<head>
	<script src="scriptaculous-js-1.8.3/lib/prototype.js"></script>
	<script src="scriptaculous-js-1.8.3/src/build.js"></script>
	<script src="scriptaculous-js-1.8.3/src/controls.js"></script>
	<script src="scriptaculous-js-1.8.3/src/dragdrop.js"></script>
	<script src="scriptaculous-js-1.8.3/src/effects.js"></script>
	<script src="scriptaculous-js-1.8.3/src/scriptaculous.js"></script>
	<script src="scriptaculous-js-1.8.3/src/slider.js"></script>
	<script src="scriptaculous-js-1.8.3/src/sound.js"></script>
	<style type="text/css">
		body { font-family: tahoma, verdana, arial, sans-serif; font-size: 80% }
		div#content { 
			z-index:100;
			position:relative;
			margin-top:0px;
			padding:5 5 5 2;  
			clear:both; 
			border:0px solid #E0E0E0;
			background: url('img/underline.gif') no-repeat;
			background-position: -400 0;
			background-color: #FFF;
		}
		
		div#tab { float: left; }
		div#status { float: left; color: #F0F0F0; padding: 5px; vertical-align: middle; }
		
		div.tab { 
			z-index:0; position:relative;
			border-color: #F0F0F0; 
			border-style: solid; 
			border-top-width: 1px;
			border-right-width: 1px;
			border-bottom-width: 0px;
			border-left-width: 1px;
			padding: 5px;
			width: 35px;
			text-align:center;
			background: url('img/top_gradient.png') repeat-x;
			background-position: 0 7;
			margin:0px;
			margin-left:5px;
			clip:rect(0px,60px,200px,0px);
		}
	</style>
</head>
<body>
	<script language="javascript">
		var loadingGraphic 			= 'img/ajax-loader.gif';
		var anotherLoadingGraphic 	= 'img/buildStates/running_green_transparent.gif';
		var okGraphic 				= 'img/buildStates/success_small.gif';
		var dilbertGraphic 			= 'img/dilbert.gif';
		var tabImage,tab,cartoon,statusMessage;
		
		document.observe('dom:loaded', function() {
			tabImage = $('tab_image');
			tab = $('tab');
			cartoon = $('cartoon');
			statusMessage = $('status');
			
			showTab(anotherLoadingGraphic);
			
			showStatus("Waiting...");
			
			window.setTimeout(loadCartoon, 3000);
		});
		
		function loadCartoon() {
			cartoon.setStyle({ "opacity" : "0" });
			
			cartoon.setAttribute(
				'src', 
				'http://dilbert.com/dyn/str_strip/000000000/00000000/0000000/000000/80000/1000/600/81607/81607.strip.gif'
			);
			
			showDilbert();
			
			showStatus("");
			
			cartoon.fade({ duration: 1.0, from: 0, to: 1 });
		}
		
		function showDilbert() {
			var slideDownBy = 25;
				
			new Effect.Move(tab.getAttribute('id'), 
				{ 
					y: slideDownBy, 
					mode: 'relative', 
					queue: 'end', 
					duration: 0.0, 
					afterFinish : function() { tabImage.setAttribute('src', dilbertGraphic); } 
				}
			)	
			
			new Effect.Move(tab.getAttribute('id'), 
				{ 
					y: -(slideDownBy), 
					mode: 'relative', 
					queue: 'end',
					duration: 1.0
				}
			)
			
			new Effect.Pulsate(
				tabImage.getAttribute('id'),
				{ duration: 1.0, pulses: 3, queue: 'end' }
			);
		}
		
		function showTab(url, andThen) {
			tabImage.setAttribute('src', url);
			
			if (andThen != null) {
				andThen();
			}
		}
		
		function showStatus(message) {
			statusMessage.update(message);
		}
		
	</script>
	<div id="structure" style="padding:40px">
		<div id="tab" class="tab"><a href="javascript:void(0)"><img id="tab_image"/></a></div>
		<div id="status"></div>
		<div id="content"><img id="cartoon" /></div>
	</div>
</body>
</html>